<?xml version="1.0" encoding="UTF-8"?>
<syntax name="typescript">
    <meta>
        <name>TypeScript</name>
        <type>script</type>
        <preferred-file-extension>ts</preferred-file-extension>
        <parent>javascript</parent>
        <scriptable shebang="#!/usr/bin/env typescript" />
    </meta>
    
    <detectors>
        <extension>ts</extension>
    </detectors>
    
    <indentation>
        <increase>
            <expression>(\{[^}\"']*$)|(\[[^\]\"']*$)|(\([^)\"']*$)</expression>
        </increase>
        <decrease>
            <expression>^\s*(\s*/\*.*\*/\s*)*[\}\]\)\\]</expression>
        </decrease>
    </indentation>
    
    <comments>
        <single>
            <expression>//</expression>
        </single>
        <multiline>
            <starts-with>
                <expression>/*</expression>
            </starts-with>
            <ends-with>
                <expression>*/</expression>
            </ends-with>
        </multiline>
    </comments>
    
    <autoclosing-pairs>
        <pair open="{" close="}" />
        <pair open="[" close="]" />
        <pair open="(" close=")" />
        <pair open="&apos;" close="&apos;" notIn="string,regex,comment" />
        <pair open="&quot;" close="&quot;" notIn="string,regex" />
        <pair open="`" close="`" notIn="string,regex,comment" />
        <pair open="“" close="”" notIn="string,regex" />
        <pair open="‘" close="’" notIn="string,regex,comment" />
        <pair open="/**" close=" */" notIn="string,regex,comment" />
    </autoclosing-pairs>
    
    <surrounding-pairs>
        <pair open="{" close="}" />
        <pair open="[" close="]" />
        <pair open="(" close=")" />
        <pair open="&apos;" close="&apos;" />
        <pair open="&quot;" close="&quot;" />
        <pair open="`" close="`" />
        <pair open="“" close="”" />
        <pair open="‘" close="’" />
        <pair open="&lt;" close="&gt;" />
    </surrounding-pairs>
    
    <injection>
        <expression>^(ts|TS|typescript|TypeScript)$</expression>
    </injection>
    
    <tree-sitter>
        <highlights path="javascript/highlights-shared.scm" />
        <highlights path="typescript/highlights.scm" />
        <injections path="javascript/injections.scm" />
        <folds path="javascript/folds.scm" />
        <folds path="typescript/folds.scm" />
        <symbols path="typescript/symbols.scm" />
    </tree-sitter>
    
    
    <!-- The TypeScript regular expression grammar scopes are deprecated.
         They remain for backwards compatibility with third-party extensions.
         Do not rely on these for new grammars.
         They will be removed in a future release. -->
    
    <scopes>
        <include syntax="self" collection="comments" />
        <include syntax="self" collection="decorators" />
        <include syntax="self" collection="imports" />
        <include syntax="self" collection="definitions" />
        <include syntax="self" collection="variables" />
        <include syntax="self" collection="blocks" />
        <include syntax="self" collection="functions" />
        <include syntax="self" collection="keywords" />
        <include syntax="self" collection="values" />
        <include syntax="self" collection="identifiers" />
        <include syntax="self" collection="blocks" />
        <include syntax="self" collection="syntax" />
    </scopes>
    
    <collections>
        <!-- !Comments -->
        <collection name="comments">
            <scope name="typescript.comment.single.shebang">
                <expression>^\#!(.*)$</expression>
                <capture number="1" name="typescript.comment.content" />
            </scope>
            <scope name="typescript.comment.single" spell-check="true">
                <expression>\/\/(.*)$</expression>
                <capture number="1" name="typescript.comment.content" />
            </scope>
            <scope name="typescript.comment.block" spell-check="true">
                <starts-with>
                    <expression>\/\*</expression>
                </starts-with>
                <ends-with>
                    <expression>\*\/</expression>
                </ends-with>
            </scope>
        </collection>
        
        <!-- !Blocks -->
        <collection name="blocks">
            <scope name="typescript.block">
                <symbol type="block">
                    <context behavior="subtree" />
                </symbol>
                <starts-with>
                    <expression>\{</expression>
                    <capture number="0" name="typescript.block.bracket" />
                </starts-with>
                <ends-with>
                    <expression>\}</expression>
                    <capture number="0" name="typescript.block.bracket" />
                </ends-with>
                <subscopes>
                    <include syntax="self" />
                </subscopes>
            </scope>
        </collection>
        
        <!-- !Imports -->
        <collection name="imports">
            <scope name="typescript.import">
                <starts-with>
                    <expression>\b(import)\b</expression>
                    <capture number="1" name="typescript.keyword.statement.import" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="import-references" optional="true" repeat="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="import-paths" />
                </subscopes>
            </scope>
        </collection>
        
        <!-- !Import References -->
        <collection name="import-references">
            <include syntax="self" collection="comments" optional="true" repeat="true" />
            <scope name="typescript.destructure">
                <starts-with>
                    <expression>\{</expression>
                    <capture number="0" name="typescript.destructure.bracket" />
                </starts-with>
                <ends-with>
                    <expression>\}</expression>
                    <capture number="0" name="typescript.destructure.bracket" />
                </ends-with>
                <subscopes>
                    <cut-off>
                        <expression>(?=\b(?:static|async|function|class|if|else|while|for)\b)</expression>
                    </cut-off>
                    <include syntax="self" collection="comments" />
                    <include syntax="self" collection="import-as-expression" />
                    <scope name="typescript.identifier">
                        <symbol type="variable" scope="external" />
                        <expression>(?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*</expression>
                    </scope>
                    <scope name="typescript.comma">
                        <expression>,</expression>
                    </scope>
                </subscopes>
            </scope>
            <scope name="typescript.keyword.modifier">
                <expression>from</expression>
            </scope>
            <include syntax="self" collection="import-as-expression" />
            <scope name="typescript.operator.all">
                <expression>\*</expression>
            </scope>
            <scope name="typescript.identifier">
                <symbol type="variable" scope="external" />
                <expression>(?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*</expression>
            </scope>
            <scope name="typescript.comma">
                <expression>,</expression>
            </scope>
        </collection>
        
        <!-- !Import As Expression -->
        <collection name="import-as-expression">
            <scope name="typescript.import-as-expression">
                <starts-with>
                    <expression>(?:(?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*|(\*))(?=\s+(?:as)\b)</expression>
                    <capture number="1" name="typescript.operator" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <scope name="typescript.keyword.modifier">
                        <expression>\b(as)\b</expression>
                    </scope>
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.identifier">
                        <symbol type="variable" scope="external" />
                        <expression>(?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*</expression>
                    </scope>
                </subscopes>
            </scope>
        </collection>
        
        <!-- !Import Paths -->
        <collection name="import-paths">
            <scope name="typescript.string.double-quoted.path">
                <starts-with>
                    <expression>&quot;</expression>
                    <capture number="0" name="typescript.string.double-quoted.path.delimiter" />
                </starts-with>
                <ends-with>
                    <expression>&quot;|(?:(?&lt;!\\)$)</expression>
                    <capture number="0" name="typescript.string.double-quoted.path.delimiter" />
                </ends-with>
                <subscopes>
                    <scope name="typescript.string.double-quoted.path.escape">
                        <expression>\\(?:\\|&quot;|n|r|t|b|f)</expression>
                    </scope>
                </subscopes>
            </scope>
            <scope name="typescript.string.single-quoted.path">
                <starts-with>
                    <expression>&apos;</expression>
                    <capture number="0" name="typescript.string.single-quoted.path.delimiter" />
                </starts-with>
                <ends-with>
                    <expression>&apos;|(?:(?&lt;!\\)$)</expression>
                    <capture number="0" name="typescript.string.single-quoted.path.delimiter" />
                </ends-with>
                <subscopes>
                    <scope name="typescript.string.single-quoted.path.escape">
                        <expression>\\(?:\\|&apos;|n|r|t|b|f)</expression>
                    </scope>
                </subscopes>
            </scope>
        </collection>
        
        <!-- !Definitions -->
        <collection name="definitions">
            <!-- !Type -->
            <scope name="typescript.definition.type">
                <symbol type="interface" />
                <starts-with>
                    <expression>\b(type)\s+([a-zA-Z_][a-zA-Z0-9_]*)</expression>
                    <capture number="1" name="typescript.keyword.construct.type" />
                    <capture number="2" name="typescript.identifier.type.name" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="generics" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.operator">
                        <expression>\=</expression>
                    </scope>
                    <include syntax="self" collection="types" repeat="true" />
                </subscopes>
            </scope>
            
            <!-- !Interface -->
            <scope name="typescript.definition.interface">
                <symbol type="interface" />
                <starts-with>
                    <expression>\b(?:(export)\s+)?(interface)\s+([a-zA-Z_][a-zA-Z0-9_]*)</expression>
                    <capture number="1" name="typescript.keyword.modifier.export" />
                    <capture number="2" name="typescript.keyword.construct.interface" />
                    <capture number="3" name="typescript.identifier.type.interface.name" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="generics" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.definition.interface.extends" optional="true">
                        <starts-with>
                            <expression>\b(extends)\b</expression>
                            <capture number="1" name="typescript.keyword.modifier.extends" />
                        </starts-with>
                        <ends-with>
                            <expression>(?=\{|implements)</expression>
                        </ends-with>
                        <subscopes>
                            <!-- `extends` only allows specifying a single type -->
                            <scope name="typescript.identifier.type">
                                <expression>([a-zA-Z_][A-Za-z0-9_]*)</expression>
                            </scope>
                            <scope name="typescript.separator">
                                <expression>\.</expression>
                            </scope>
                        </subscopes>
                    </scope>
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.block">
                        <symbol type="block">
                            <context behavior="subtree" fold-type="class" />
                        </symbol>
                        <starts-with>
                            <expression>\{</expression>
                            <capture number="0" name="typescript.bracket" />
                        </starts-with>
                        <ends-with>
                            <expression>\}</expression>
                            <capture number="0" name="typescript.bracket" />
                        </ends-with>
                        <subscopes>
                            <include syntax="self" collection="comments" />
                            <include syntax="self" collection="decorators" />
                            <include syntax="self" collection="properties" />
                            <include syntax="self" collection="methods" />
                        </subscopes>
                    </scope>
                </subscopes>
            </scope>
            
            <!-- !Module -->
            <scope name="typescript.definition.module">
                <symbol type="package" />
                <expression>\b(module)\s+([a-zA-Z_][a-zA-Z0-9_]*)</expression>
                <capture number="1" name="typescript.keyword.construct.module" />
                <capture number="2" name="typescript.identifier.type.module.name" />
            </scope>
            
            <!-- !Class -->
            <scope name="typescript.definition.class">
                <symbol type="class">
                    <context behavior="subtree" foldable="false" />
                </symbol>
                <starts-with>
                    <expression>(?:\b(export)\s+)?(?:\b(abstract)\s+)?\b(class)\s+([a-zA-Z_][a-zA-Z0-9_]*)</expression>
                    <capture number="1" name="typescript.keyword.modifier.export" />
                    <capture number="2" name="typescript.keyword.modifier.abstract" />
                    <capture number="3" name="typescript.keyword.construct.class" />
                    <capture number="4" name="typescript.identifier.type.class.name" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="generics" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.definition.class.extends" optional="true">
                        <starts-with>
                            <expression>\b(extends)\b</expression>
                            <capture number="1" name="typescript.keyword.modifier.extends" />
                        </starts-with>
                        <ends-with>
                            <expression>(?=\{|implements)</expression>
                        </ends-with>
                        <subscopes anchored="true">
                            <!-- `extends` only allows specifying a single type -->
                            <scope name="typescript.identifier.type">
                                <expression>([a-zA-Z_][A-Za-z0-9_]*)</expression>
                            </scope>
                            <scope name="typescript.separator">
                                <expression>\.</expression>
                            </scope>
                        </subscopes>
                    </scope>
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.definition.class.implements" optional="true">
                        <starts-with>
                            <expression>\b(implements)</expression>
                            <capture number="1" name="typescript.keyword.modifier.implements" />
                        </starts-with>
                        <ends-with>
                            <expression>(?=\{|extends)</expression>
                        </ends-with>
                        <subscopes>
                            <!-- `implements` only allows specifying simple interface -->
                            <scope name="typescript.identifier.type">
                                <expression>([a-zA-Z_][A-Za-z0-9_]*)(\[\])?</expression>
                                <capture number="2" name="typescript.operator.array" />
                            </scope>
                            <scope name="typescript.comma">
                                <expression>,</expression>
                            </scope>
                        </subscopes>
                    </scope>
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.block">
                        <symbol type="block">
                            <context behavior="subtree" fold-type="class" />
                        </symbol>
                        <starts-with>
                            <expression>\{</expression>
                            <capture number="0" name="typescript.bracket" />
                        </starts-with>
                        <ends-with>
                            <expression>\}</expression>
                            <capture number="0" name="typescript.bracket" />
                        </ends-with>
                        <subscopes>
                            <include syntax="self" collection="comments" />
                            <include syntax="self" collection="decorators" />
                            <include syntax="self" collection="properties" />
                            <include syntax="self" collection="methods" />
                            <scope name="typescript.keyword.modifier">
                                <strings>
                                    <string>static</string>
                                    <string>async</string>
                                    <string>get</string>
                                    <string>set</string>
                                </strings>
                            </scope>
                        </subscopes>
                    </scope>
                </subscopes>
            </scope>
            
            <!-- !Function -->
            <scope name="typescript.definition.function">
                <symbol type="function">
                    <context behavior="subtree" foldable="false" />
                </symbol>
                <starts-with>
                    <expression>(?:\b(export)\s+)?(?:\b(public|private|protected)\s+)?(?:\b(async)\s+)?\b(function)\s+([a-zA-Z_][a-zA-Z0-9_]*)</expression>
                    <capture number="1" name="typescript.keyword.modifier.export" />
                    <capture number="2" name="typescript.keyword.modifier" />
                    <capture number="3" name="typescript.keyword.modifier" />
                    <capture number="4" name="typescript.keyword.construct.function" />
                    <capture number="5" name="typescript.identifier.function.name" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="return-types" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="function-blocks" />
                </subscopes>
            </scope>
            
            <!-- !Anonymous Function -->
            <scope name="typescript.definition.function.anonymous">
                <symbol type="function" anonymous="true">
                    <context behavior="subtree" foldable="false" />
                </symbol>
                <starts-with>
                    <expression>(?:\b(async)\s+)?\b(function)(?=\s*\()</expression>
                    <capture number="1" name="typescript.keyword.modifier" />
                    <capture number="2" name="typescript.keyword.construct" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="return-types" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="function-blocks" />
                </subscopes>
            </scope>
            <scope name="typescript.definition.function.arrow.anonymous">
                <symbol type="function" anonymous="true">
                    <context behavior="subtree" foldable="false" />
                </symbol>
                <starts-with>
                    <expression>(?:\b(async)\s+)?(?=(?:
                        (?:\([A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_,*.=${}\[\]:&lt;&gt;\|&amp;\s\\]*\)
                            (?:\:[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_,*.={}\[\]:&lt;&gt;\|&amp;\s\\]*)?) # (arg, arg): type =>
                        |(?:(?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_:&lt;&gt;\|&amp;]*) # arg =>
                    )\s*=&gt;\s*)</expression>
                    <capture number="1" name="typescript.keyword.modifier" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arrow-function-arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="return-types" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.operator">
                        <expression>=&gt;</expression>
                    </scope>
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arrow-function-body-expressions" />
                </subscopes>
            </scope>
        </collection>
        
        <!-- !Variables -->
        <collection name="variables">
            <!-- !Named Function Variables -->
            <scope name="typescript.definition.function.variable">
                <symbol type="function">
                    <context behavior="subtree" foldable="false" />
                </symbol>
                <starts-with>
                    <expression>\b(let|var|const)\s+((?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)\s*(=)\s*(?:(async)\s+)?(function)(\*)?(?=\s*\()</expression>
                    <capture number="1" name="typescript.keyword.construct" />
                    <capture number="2" name="typescript.function.identifier.name" />
                    <capture number="3" name="typescript.operator.equals" />
                    <capture number="4" name="typescript.keyword.modifier" />
                    <capture number="5" name="typescript.keyword.construct" />
                    <capture number="6" name="typescript.operator" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="return-types" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="function-blocks" />
                </subscopes>
            </scope>
            <scope name="typescript.definition.function.variable">
                <symbol type="function">
                    <context behavior="subtree" foldable="false" />
                </symbol>
                <starts-with>
                    <expression>((?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)\s*(=)\s*(?:(async)\s+)?(function)(\*)?(?=\s*\()</expression>
                    <capture number="1" name="typescript.function.identifier.name" />
                    <capture number="2" name="typescript.operator.equals" />
                    <capture number="3" name="typescript.keyword.modifier" />
                    <capture number="4" name="typescript.keyword.construct" />
                    <capture number="5" name="typescript.operator" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="return-types" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="function-blocks" />
                </subscopes>
            </scope>
            
            <!-- !Arrow Function Variables -->
            <scope name="typescript.definition.function.arrow.named.local">
                <symbol type="function">
                    <context behavior="subtree" foldable="false" />
                </symbol>
                <starts-with>
                    <expression>
                        \b(let|var|const)\s+((?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)\s*(=)\s* # Variable
                        (?:(async)\s+)?(?=(?:
                            (?&lt;![A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]) # Not preceeded by an identifier
                            (?:\(
                                (?:
                                    # Opening parenthesis preceeded by an identifier (function call)
                                    ((?&lt;=[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_])\()
                                    # Closing parenthesis not followed by the arrow operator
                                    | (\)(?!\s*=&gt;))
                                    # All characters other than parenthesis
                                    | [^\(\)]
                                )*
                            \)) # (arg, arg) =>
                            |(?:(?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*) # arg =>
                        )\s*=&gt;\s*)
                    </expression>
                    <capture number="1" name="typescript.keyword.construct" />
                    <capture number="2" name="typescript.identifier.function.name" />
                    <capture number="3" name="typescript.operator.equals" />
                    <capture number="4" name="typescript.keyword.modifier" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arrow-function-arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="return-types" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.operator">
                        <expression>=&gt;</expression>
                    </scope>
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arrow-function-body-expressions" />
                </subscopes>
            </scope>
            <scope name="typescript.definition.function.arrow.named.global">
                <symbol type="function">
                    <context behavior="subtree" foldable="false" />
                </symbol>
                <starts-with>
                    <expression>
                        ((?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)\s*(=)\s* # Variable
                        (?:(async)\s+)?(?=(?:
                            (?&lt;![A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]) # Not preceeded by an identifier
                            (?:\(
                                (?:
                                    # Opening parenthesis preceeded by an identifier (function call)
                                    ((?&lt;=[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_])\()
                                    # Closing parenthesis not followed by the arrow operator
                                    | (\)(?!\s*=&gt;))
                                    # All characters other than parenthesis
                                    | [^\(\)]
                                )*
                            \)) # (arg, arg) =>
                            |(?:(?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*) # arg =>
                        )\s*=&gt;\s*)
                    </expression>
                    <capture number="1" name="typescript.identifier.function.name" />
                    <capture number="2" name="typescript.operator.equals" />
                    <capture number="3" name="typescript.keyword.modifier" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arrow-function-arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="return-types" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.operator">
                        <expression>=&gt;</expression>
                    </scope>
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arrow-function-body-expressions" />
                </subscopes>
            </scope>
            
            <scope name="typescript.definition.property">
                <symbol type="property" scope="private" />
                <expression>(this)(\.)(\#?[a-zA-Z_\$][A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)\s*(\=)</expression>
                <capture number="1" name="typescript.keyword.self" />
                <capture number="2" name="typescript.operator" />
                <capture number="3" name="typescript.identifier.property.name" />
                <capture number="4" name="typescript.operator" />
            </scope>
            
            <!-- !Destructuring Assignment -->
            <scope name="typescript.destructure-assignment-array">
                <starts-with>
                    <expression>\b(let|var|const)\s+(\[)(?=[a-zA-ZA-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_,\s\.]+\]\s*\=)</expression>
                    <capture number="1" name="typescript.keyword.construct" />
                    <capture number="2" name="typescript.destructure.bracket" />
                </starts-with>
                <ends-with>
                    <expression>\]</expression>
                    <capture number="0" name="typescript.destructure.bracket" />
                </ends-with>
                <subscopes>
                    <cut-off>
                        <expression>(?=\b(?:static|async|function|class|if|else|while|for)\b)</expression>
                    </cut-off>
                    <scope name="typescript.identifier">
                        <symbol type="variable" scope="local" />
                        <expression>(?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*</expression>
                    </scope>
                    <scope name="typescript.rest">
                        <symbol type="variable" scope="local" />
                        <expression>(\.\.\.)((?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)</expression>
                        <capture number="1" name="typescript.rest.operator" />
                        <capture number="2" name="typescript.rest.identifier.name" />
                    </scope>
                    <scope name="typescript.comma">
                        <expression>,</expression>
                    </scope>
                </subscopes>
            </scope>
            <scope name="typescript.destructure-assignment-array">
                <starts-with>
                    <expression>(?&lt;![a-zA-ZA-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_])\[(?=[a-zA-ZA-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_,\s\.]+\]\s*\=)</expression>
                    <capture number="0" name="typescript.destructure.bracket" />
                </starts-with>
                <ends-with>
                    <expression>\]</expression>
                    <capture number="0" name="typescript.destructure.bracket" />
                </ends-with>
                <subscopes>
                    <cut-off>
                        <expression>(?=\b(?:static|async|function|class|if|else|while|for)\b)</expression>
                    </cut-off>
                    <scope name="typescript.identifier">
                        <symbol type="variable" scope="local" />
                        <expression>(?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*</expression>
                    </scope>
                    <scope name="typescript.rest">
                        <symbol type="variable" scope="local" />
                        <expression>(\.\.\.)((?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)</expression>
                        <capture number="1" name="typescript.rest.operator" />
                        <capture number="2" name="typescript.rest.identifier.name" />
                    </scope>
                    <scope name="typescript.comma">
                        <expression>,</expression>
                    </scope>
                </subscopes>
            </scope>
            <scope name="typescript.destructure-assignment-objet">
                <starts-with>
                    <expression>\b(let|var|const)\s+(\{)(?=[a-zA-ZA-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_,\s\.]+\}\s*\=)</expression>
                    <capture number="1" name="typescript.keyword.construct" />
                    <capture number="2" name="typescript.destructure.bracket" />
                </starts-with>
                <ends-with>
                    <expression>\}</expression>
                    <capture number="0" name="typescript.destructure.bracket" />
                </ends-with>
                <subscopes>
                    <cut-off>
                        <expression>(?=\b(?:static|async|function|class|if|else|while|for)\b)</expression>
                    </cut-off>
                    <scope name="typescript.identifier">
                        <symbol type="variable" scope="local" />
                        <expression>(?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*</expression>
                    </scope>
                    <scope name="typescript.rest">
                        <symbol type="variable" scope="local" />
                        <expression>(\.\.\.)((?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)</expression>
                        <capture number="1" name="typescript.rest.operator" />
                        <capture number="2" name="typescript.rest.identifier.name" />
                    </scope>
                    <scope name="typescript.comma">
                        <expression>,</expression>
                    </scope>
                </subscopes>
            </scope>
            <scope name="typescript.destructure-assignment-object">
                <starts-with>
                    <expression>(?&lt;![a-zA-ZA-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_])\{(?=[a-zA-ZA-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_,\s\.]+\}\s*\=)</expression>
                    <capture number="0" name="typescript.destructure.bracket" />
                </starts-with>
                <ends-with>
                    <expression>\}</expression>
                    <capture number="0" name="typescript.destructure.bracket" />
                </ends-with>
                <subscopes>
                    <cut-off>
                        <expression>(?=\b(?:static|async|function|class|if|else|while|for)\b)</expression>
                    </cut-off>
                    <scope name="typescript.identifier">
                        <symbol type="variable" scope="local" />
                        <expression>(?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*</expression>
                    </scope>
                    <scope name="typescript.rest">
                        <symbol type="variable" scope="local" />
                        <expression>(\.\.\.)((?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)</expression>
                        <capture number="1" name="typescript.rest.operator" />
                        <capture number="2" name="typescript.rest.identifier.name" />
                    </scope>
                    <scope name="typescript.comma">
                        <expression>,</expression>
                    </scope>
                </subscopes>
            </scope>
            
            <scope name="typescript.definition.constant.local">
                <symbol type="constant" scope="local" />
                <starts-with>
                    <expression>\b(const)\s+([a-zA-Z_][A-Za-z0-9_]*)\b</expression>
                    <capture number="1" name="typescript.keyword..construct.const" />
                    <capture number="2" name="typescript.identifier.constant.name" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <scope name="typescript.constant.type">
                        <starts-with>
                            <expression>\:</expression>
                            <capture number="0" name="typescript.operator" />
                        </starts-with>
                        <ends-with>
                            <expression>\=|,|;|\b(?=(?:in|of))\b|$</expression>
                        </ends-with>
                        <subscopes anchored="true">
                            <include syntax="self" collection="types" repeat="true" />
                        </subscopes>
                    </scope>
                </subscopes>
            </scope>
            
            <scope name="typescript.definition.variable.local">
                <symbol type="variable" scope="local" />
                <starts-with>
                    <expression>\b(let|var)\s+([a-zA-Z_][A-Za-z0-9_]*)\b</expression>
                    <capture number="1" name="typescript.keyword.variable.let" />
                    <capture number="2" name="typescript.identifier.name" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <scope name="typescript.variable.type">
                        <starts-with>
                            <expression>\:</expression>
                            <capture number="0" name="typescript.operator" />
                        </starts-with>
                        <ends-with>
                            <expression>\=|,|;|\b(?=(?:in|of))\b|$</expression>
                        </ends-with>
                        <subscopes anchored="true">
                            <include syntax="self" collection="types" repeat="true" />
                        </subscopes>
                    </scope>
                </subscopes>
            </scope>
            
            <scope name="typescript.definition.variable.global">
                <symbol type="variable" scope="global" />
                <starts-with>
                    <expression>\b([a-zA-Z_][A-Za-z0-9_]*)\b\s*(=|:)</expression>
                    <capture number="1" name="typescript.identifier.name" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <scope name="typescript.variable.type">
                        <starts-with>
                            <expression>\:</expression>
                            <capture number="0" name="typescript.operator" />
                        </starts-with>
                        <ends-with>
                            <expression>\=|,|;|\b(?=(?:in|of))\b|$</expression>
                        </ends-with>
                        <subscopes anchored="true">
                            <include syntax="self" collection="types" repeat="true" />
                        </subscopes>
                    </scope>
                </subscopes>
            </scope>
        </collection>
        
        <!-- !Functions -->
        <collection name="functions">
            <scope name="typescript.definition.function.named">
                <symbol type="function">
                    <context behavior="subtree" foldable="false" />
                </symbol>
                <starts-with>
                    <expression>(?:\b(async)\s+)?\b(function)(\*)?\s+([a-zA-Z_\$][A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)</expression>
                    <capture number="1" name="typescript.keyword.modifier.async" />
                    <capture number="2" name="typescript.keyword.construct" />
                    <capture number="3" name="typescript.operator" />
                    <capture number="4" name="typescript.identifier.function.name" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="return-types" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="function-blocks" />
                </subscopes>
            </scope>
            
            <scope name="typescript.definition.function.anonymous">
                <symbol type="function" anonymous="true">
                    <context behavior="subtree" foldable="false" />
                </symbol>
                <starts-with>
                    <expression>(?:\b(async)\s+)?\b(function)(\*)?(?=\s*\()</expression>
                    <capture number="1" name="typescript.keyword.modifier" />
                    <capture number="2" name="typescript.keyword.construct" />
                    <capture number="3" name="typescript.operator" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="return-types" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="function-blocks" />
                </subscopes>
            </scope>
            <scope name="typescript.definition.function.arrow.anonymous">
                <symbol type="function" anonymous="true">
                    <context behavior="subtree" foldable="false" />
                </symbol>
                <starts-with>
                    <expression>(?:\b(async)\s+)?(?=(?:
                        (?&lt;![A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]) # Not preceeded by an identifier
                        (?:\(
                            (?:
                                # Opening parenthesis preceeded by an identifier (function call)
                                ((?&lt;=[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_])\()
                                # Closing parenthesis not followed by the arrow operator
                                | (\)(?!\s*=&gt;))
                                # All characters other than parenthesis
                                | [^\(\)]
                            )*
                        \)) # (arg, arg) =>
                        |(?:(?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*) # arg =>
                    )\s*=&gt;\s*)</expression>
                    <capture number="1" name="typescript.keyword.modifier" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arrow-function-arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="return-types" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.operator">
                        <expression>=&gt;</expression>
                    </scope>
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arrow-function-body-expressions" />
                </subscopes>
            </scope>
        </collection>
        
        <!-- !Methods -->
        <collection name="methods">
            <scope name="typescript.method.constructor">
                <symbol type="method">
                    <context behavior="subtree" foldable="false" />
                </symbol>
                <starts-with>
                    <expression>\b(constructor)\s*(?=\()</expression>
                    <capture number="1" name="typescript.keyword.construct.name.constructor" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="return-types" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="function-blocks" />
                </subscopes>
            </scope>
            
            <scope name="typescript.method.getter">
                <symbol type="getter">
                    <context behavior="subtree" foldable="false" />
                </symbol>
                <starts-with>
                    <expression>(?:\b(public|private|protected)\s+)?\b(get)\s+([a-zA-Z_\$][A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)\b</expression>
                    <capture number="1" name="typescript.keyword.modifier" />
                    <capture number="2" name="typescript.keyword.modifier" />
                    <capture number="3" name="typescript.identifier.method.name" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="return-types" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="function-blocks" />
                </subscopes>
            </scope>
            
            <scope name="typescript.method.setter">
                <symbol type="setter">
                    <context behavior="subtree" foldable="false" />
                </symbol>
                <starts-with>
                    <expression>(?:\b(public|private|protected)\s+)?\b(set)\s+([a-zA-Z_\$][A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)\b</expression>
                    <capture number="1" name="typescript.keyword.modifier" />
                    <capture number="2" name="typescript.keyword.modifier" />
                    <capture number="3" name="typescript.identifier.method.name" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="return-types" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="function-blocks" />
                </subscopes>
            </scope>
            
            <scope name="typescript.method">
                <symbol type="method">
                    <context behavior="subtree" foldable="false" />
                </symbol>
                <starts-with>
                    <expression>(?:\b(public|private|protected)\s+)?(?:\b(static)\s+)?(?:\b(async)\s+)?\b([a-zA-Z_][a-zA-Z0-9_]*)(\?|!)?</expression>
                    <capture number="1" name="typescript.keyword.modifier" />
                    <capture number="2" name="typescript.keyword.modifier" />
                    <capture number="3" name="typescript.keyword.modifier" />
                    <capture number="4" name="typescript.identifier.method.name" />
                    <capture number="5" name="typescript.operator" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="generics" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="return-types" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="function-blocks" />
                </subscopes>
            </scope>
            
            <scope name="typescript.method.getter.computed">
                <symbol type="getter">
                    <context behavior="subtree" foldable="false" />
                </symbol>
                <starts-with>
                    <expression>(?:\b(public|private|protected)\s+)?\b(get)\s+(\[)</expression>
                    <capture number="1" name="typescript.keyword.modifier" />
                    <capture number="2" name="typescript.keyword.modifier" />
                    <capture number="3" name="typescript.bracket" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.method.computed.expression.name">
                        <starts-with>
                            <expression>(?=[^\]])</expression>
                        </starts-with>
                        <ends-with>
                            <expression>(?=\])</expression>
                        </ends-with>
                        <subscopes anchored="true">
                            <include syntax="self" collection="expressions" repeat="true" />
                        </subscopes>
                    </scope>
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.bracket">
                        <expression>\]</expression>
                    </scope>
                    <include syntax="self" collection="arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="return-types" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="function-blocks" />
                </subscopes>
            </scope>
            
            <scope name="typescript.method.setter.computed">
                <symbol type="setter">
                    <context behavior="subtree" foldable="false" />
                </symbol>
                <starts-with>
                    <expression>(?:\b(public|private|protected)\s+)?\b(set)\s+(\[)</expression>
                    <capture number="1" name="typescript.keyword.modifier" />
                    <capture number="2" name="typescript.keyword.modifier" />
                    <capture number="3" name="typescript.bracket" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.method.computed.expression.name">
                        <starts-with>
                            <expression>(?=[^\]])</expression>
                        </starts-with>
                        <ends-with>
                            <expression>(?=\])</expression>
                        </ends-with>
                        <subscopes anchored="true">
                            <include syntax="self" collection="expressions" repeat="true" />
                        </subscopes>
                    </scope>
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.bracket">
                        <expression>\]</expression>
                    </scope>
                    <include syntax="self" collection="arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="return-types" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="function-blocks" />
                </subscopes>
            </scope>
            
            <scope name="typescript.method.computed">
                <symbol type="method">
                    <context behavior="subtree" foldable="false" />
                </symbol>
                <starts-with>
                    <expression>(?:\b(public|private|protected)\s+)?(?:(?:\b(async)(\*)?\s+)|(\*)?)(\[)</expression>
                    <capture number="1" name="typescript.keyword.modifier" />
                    <capture number="2" name="typescript.keyword.modifier" />
                    <capture number="3" name="typescript.operator" />
                    <capture number="4" name="typescript.operator" />
                    <capture number="5" name="typescript.bracket" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.method.computed.expression.name">
                        <starts-with>
                            <expression>(?=[^\]])</expression>
                        </starts-with>
                        <ends-with>
                            <expression>(?=\])</expression>
                        </ends-with>
                        <subscopes anchored="true">
                            <include syntax="self" collection="expressions" repeat="true" />
                        </subscopes>
                    </scope>
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.bracket">
                        <expression>\]</expression>
                    </scope>
                    <include syntax="self" collection="arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="return-types" optional="true" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="function-blocks" />
                </subscopes>
            </scope>
        </collection>
        
        <!-- !Properties -->
        <collection name="properties">
            <include syntax="self" collection="comments" />
            
            <scope name="typescript.definition.property">
                <symbol type="property" scope="private" />
                <starts-with>
                    <expression>\b(?:(readonly|public|private|protected)\s+)?([a-zA-Z_][A-Za-z0-9_]*)(\?|!)?\s*(?=\:|\=)</expression>
                    <capture number="1" name="typescript.keyword.modifier" />
                    <capture number="2" name="typescript.identifier.property.name" />
                    <capture number="3" name="typescript.operator" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <scope name="typescript.definition.property.types" optional="true">
                        <starts-with>
                            <expression>\:</expression>
                            <capture number="0" name="typescript.operator" />
                        </starts-with>
                        <ends-with>
                            <expression>$|(?=;|\=)</expression>
                        </ends-with>
                        <subscopes anchored="true">
                            <include syntax="self" collection="types" repeat="true" />
                        </subscopes>
                    </scope>
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.definition.property.value" optional="true">
                        <starts-with>
                            <expression>\=</expression>
                            <capture number="0" name="typescript.operator" />
                        </starts-with>
                        <ends-with>
                            <expression>$|(?=;)</expression>
                        </ends-with>
                        <subscopes>
                            <cut-off>
                                <expression>(?=\b(?:public|private|protected|function|class|if|else|while|for)\b)</expression>
                            </cut-off>
                            <include syntax="self" collection="comments" />
                            <include syntax="self" collection="blocks" />
                            <include syntax="self" collection="values" />
                            <include syntax="self" collection="identifiers" />
                            <include syntax="self" collection="blocks" />
                        </subscopes>
                    </scope>
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.semicolon">
                        <expression>;</expression>
                    </scope>
                </subscopes>
            </scope>
            
            <scope name="typescript.definition.property.index-signature">
                <starts-with>
                    <expression>(?:\b(readonly|public|private|protected)\s+)?(\[)</expression>
                    <capture number="1" name="typescript.keyword.modifier" />
                    <capture number="2" name="typescript.bracket" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <scope name="typescript.property.identifier.key">
                        <expression>([a-zA-Z_][A-Za-z0-9_]*)(\?|!)?</expression>
                    </scope>
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.operator">
                        <expression>\:</expression>
                    </scope>
                    <include syntax="self" collection="types" optional="true" repeat="true" />
                    <scope name="typescript.bracket">
                        <expression>\]</expression>
                    </scope>
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.operator">
                        <expression>\:</expression>
                    </scope>
                    <include syntax="self" collection="types" optional="true" repeat="true" />
                </subscopes>
            </scope>
            
            <scope name="typescript.comma">
                <expression>,</expression>
            </scope>
        </collection>
        
        <!-- !Generics -->
        <collection name="generics">
            <scope name="typescript.function-generic">
                <starts-with>
                    <expression>&lt;</expression>
                    <capture number="0" name="typescript.function-generic.bracket" />
                </starts-with>
                <ends-with>
                    <expression>&gt;</expression>
                    <capture number="0" name="typescript.function-generic.bracket" />
                </ends-with>
                <subscopes>
                    <cut-off>
                        <expression>(?=\b(?:function|class|if|else|while|for)\b)</expression>
                    </cut-off>
                    <include syntax="self" collection="comments" />
                    <include syntax="self" collection="keywords" />
                    <include syntax="self" collection="types" />
                    <scope name="typescript.operator">
                        <expression>\=</expression>
                    </scope>
                    <scope name="typescript.comma">
                        <expression>,</expression>
                    </scope>
                </subscopes>
            </scope>
        </collection>
        
        <!-- !Arguments for Functions -->
        <collection name="arguments">
            <scope name="typescript.arguments">
                <include syntax="self" collection="comments" />
                <starts-with>
                    <expression>\(</expression>
                    <capture number="0" name="typescript.bracket" />
                </starts-with>
                <ends-with>
                    <expression>\)</expression>
                    <capture number="0" name="typescript.bracket" />
                </ends-with>
                <subscopes anchored="true">
                    <include syntax="self" collection="argument-items" optional="true" repeat="true" />
                </subscopes>
            </scope>
        </collection>
        
        <!-- !Argument Items -->
        <collection name="argument-items">
            <include syntax="self" collection="comments" />
            <include syntax="self" collection="decorators" />
            
            <scope name="typescript.comma">
                <expression>,</expression>
            </scope>
            
            <scope name="typescript.destructure-array">
                <starts-with>
                    <expression>\[</expression>
                    <capture number="0" name="typescript.bracket" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="argument-items" optional="true" repeat="true" />
                    
                    <scope name="typescript.bracket">
                        <expression>\]</expression>
                    </scope>
                    
                    <scope name="typescript.argument.types" optional="true">
                        <starts-with>
                            <expression>\:</expression>
                            <capture number="0" name="typescript.operator" />
                        </starts-with>
                        <ends-with>
                            <expression>(?=\)|\,|\=)</expression>
                        </ends-with>
                        <subscopes anchored="true">
                            <include syntax="self" collection="types" repeat="true" />
                        </subscopes>
                    </scope>
                    
                    <scope name="typescript.argument.default-value" optional="true">
                        <starts-with>
                            <expression>\=</expression>
                            <capture number="0" name="typescript.operator" />
                        </starts-with>
                        <ends-with>
                            <expression>(?=\)|\,)</expression>
                        </ends-with>
                        <subscopes anchored="true">
                            <include syntax="self" collection="expressions" repeat="true" />
                        </subscopes>
                    </scope>
                </subscopes>
            </scope>
            
            <scope name="typescript.destructure-object">
                <starts-with>
                    <expression>\{</expression>
                    <capture number="0" name="typescript.bracket" />
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="argument-items" optional="true" repeat="true" />
                    
                    <scope name="typescript.bracket">
                        <expression>\}</expression>
                    </scope>
                    
                    <scope name="typescript.argument.types" optional="true">
                        <starts-with>
                            <expression>\:</expression>
                            <capture number="0" name="typescript.operator" />
                        </starts-with>
                        <ends-with>
                            <expression>(?=\)|\,|\=)</expression>
                        </ends-with>
                        <subscopes anchored="true">
                            <include syntax="self" collection="types" repeat="true" />
                        </subscopes>
                    </scope>
                    
                    <scope name="typescript.argument.default-value" optional="true">
                        <starts-with>
                            <expression>\=</expression>
                            <capture number="0" name="typescript.operator" />
                        </starts-with>
                        <ends-with>
                            <expression>(?=\)|\,)</expression>
                        </ends-with>
                        <subscopes anchored="true">
                            <include syntax="self" collection="expressions" repeat="true" />
                        </subscopes>
                    </scope>
                </subscopes>
            </scope>
            
            <scope name="typescript.argument.rest">
                <symbol type="argument" />
                <starts-with>
                    <expression>(\.\.\.)\b([a-zA-Z_][A-Za-z0-9_]*)\b</expression>
                    <capture number="1" name="typescript.operator" />
                    <capture number="2" name="typescript.identifier.argument.rest.name" />
                </starts-with>
                <ends-with>
                    <expression>(?=\)|\,)</expression>
                </ends-with>
                <subscopes anchored="true">
                    <scope name="typescript.argument.types" optional="true">
                        <starts-with>
                            <expression>\:</expression>
                            <capture number="0" name="typescript.operator" />
                        </starts-with>
                        <ends-with>
                            <expression>(?=\)|\,|\=)</expression>
                        </ends-with>
                        <subscopes anchored="true">
                            <include syntax="self" collection="types" repeat="true" />
                        </subscopes>
                    </scope>
                    <scope name="typescript.argument.default-value">
                        <starts-with>
                            <expression>\=</expression>
                            <capture number="0" name="typescript.operator" />
                        </starts-with>
                        <ends-with>
                            <expression>(?=\)|\,)</expression>
                        </ends-with>
                        <subscopes anchored="true">
                            <include syntax="self" collection="expressions" repeat="true" />
                        </subscopes>
                    </scope>
                </subscopes>
            </scope>
            
            <scope name="typescript.argument">
                <symbol type="argument" />
                <starts-with>
                    <expression>(?:(public|private|protected)\s+)?\b([a-zA-Z_][A-Za-z0-9_]*)\b(\?|!)?</expression>
                    <capture number="1" name="typescript.keyword.modifier" />
                    <capture number="2" name="typescript.identifier.argument.name" />
                    <capture number="3" name="typescript.operator" />
                </starts-with>
                <ends-with>
                    <expression>(?=\)|\,)</expression>
                </ends-with>
                <subscopes anchored="true">
                    <scope name="typescript.argument.types" optional="true">
                        <starts-with>
                            <expression>\:</expression>
                            <capture number="0" name="typescript.operator" />
                        </starts-with>
                        <ends-with>
                            <expression>(?=\)|\,|\=)</expression>
                        </ends-with>
                        <subscopes anchored="true">
                            <include syntax="self" collection="types" repeat="true" />
                        </subscopes>
                    </scope>
                    <scope name="typescript.argument.default-value">
                        <starts-with>
                            <expression>\=</expression>
                            <capture number="0" name="typescript.operator" />
                        </starts-with>
                        <ends-with>
                            <expression>(?=\)|\,)</expression>
                        </ends-with>
                        <subscopes anchored="true">
                            <include syntax="self" collection="expressions" repeat="true" />
                        </subscopes>
                    </scope>
                </subscopes>
            </scope>
        </collection>
        
        <!-- !Arguments for Arrow Functions -->
        <collection name="arrow-function-arguments">
            <scope name="typescript.identifier.argument.name.single">
                <symbol type="argument" />
                <expression>(?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*(?=\s*=&gt;)</expression>
            </scope>
            <include syntax="self" collection="arguments" />
        </collection>
        
        <!-- !Expressions for Arrow Functions -->
        <collection name="arrow-function-body-expressions">
            <include syntax="self" collection="function-blocks" />
            <include syntax="self" collection="expressions" />
        </collection>
        
        <!-- !Return Types -->
        <collection name="return-types">
            <scope name="typescript.return-type" optional="true">
                <starts-with>
                    <expression>\:</expression>
                    <capture number="0" name="typescript.operator" />
                </starts-with>
                <ends-with>
                    <expression>(?=\{|\;)|$</expression>
                </ends-with>
                <subscopes anchored="true" skip-whitespace="lazy">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="types" repeat="true" />
                </subscopes>
            </scope>
        </collection>
        
        <!-- !Function Blocks -->
        <collection name="function-blocks">
            <scope name="typescript.block">
                <symbol type="block">
                    <context behavior="subtree" fold-type="function" />
                </symbol>
                <starts-with>
                    <expression>\{</expression>
                    <capture number="0" name="typescript.bracket" />
                </starts-with>
                <ends-with>
                    <expression>\}</expression>
                    <capture number="0" name="typescript.bracket" />
                </ends-with>
                <subscopes>
                    <include syntax="self" />
                </subscopes>
            </scope>
        </collection>
        
        <!-- !Decorators -->
        <collection name="decorators">
            <scope name="typescript.decorator.with-arguments">
                <starts-with>
                    <expression>(@)([a-zA-Z0-9-_]+)(\()</expression>>
                    <capture number="1" name="typescript.decorator.operator" />
                    <capture number="2" name="typescript.decorator.identifier.name" />
                    <capture number="3" name="typescript.decorator.bracket" />
                </starts-with>
                <ends-with>
                    <expression>\)</expression>
                    <capture number="0" name="typescript.decorator.bracket" />
                </ends-with>
                <subscopes>
                    <include syntax="self" collection="expressions" />
                    <scope name="typescript.comma">
                        <expression>,</expression>
                    </scope>
                </subscopes>
            </scope>
            <scope name="typescript.decorator.without-arguments">
                <expression>(@)([a-zA-Z0-9-_]+)\b</expression>>
                <capture number="1" name="typescript.decorator.operator" />
                <capture number="2" name="typescript.decorator.identifier.name" />
            </scope>
        </collection>
        
        <!-- !Types -->
        <collection name="types">
            <include syntax="self" collection="comments" />
            
            <scope name="typescript.identifier.type.core">
                <strings>
                    <string>void</string>
                    <string>any</string>
                    <string>boolean</string>
                    <string>number</string>
                    <string>string</string>
                    <string>symbol</string>
                </strings>
            </scope>
            <scope name="typescript.operator.union">
                <expression>\|</expression>
            </scope>
            <scope name="typescript.operator.intersection">
                <expression>\&amp;</expression>
            </scope>
            <scope name="typescript.operator.dot">
                <expression>\.</expression>
            </scope>
            <scope name="typescript.array-type">
                <starts-with>
                    <expression>\[</expression>
                    <capture number="0" name="typescript.array-type.bracket" />
                </starts-with>
                <ends-with>
                    <expression>\]</expression>
                    <capture number="0" name="typescript.array-type.bracket" />
                </ends-with>
                <subscopes>
                    <cut-off>
                        <expression>(?=\b(?:function|class|if|else|while|for)\b)</expression>
                    </cut-off>
                    <include syntax="self" collection="types" />
                    <scope name="typescript.comma">
                        <expression>,</expression>
                    </scope>
                </subscopes>
            </scope>
            <scope name="typescript.object-type">
                <symbol type="block">
                    <context behavior="subtree" fold-type="function" />
                </symbol>
                <starts-with>
                    <expression>\{</expression>
                    <capture number="0" name="typescript.bracket" />
                </starts-with>
                <ends-with>
                    <expression>(\})(\[\])?</expression>
                    <capture number="1" name="typescript.bracket" />
                    <capture number="2" name="typescript.bracket" />
                </ends-with>
                <subscopes anchored="true">
                    <include syntax="self" collection="properties" optional="true" repeat="true" />
                </subscopes>
            </scope>
            <scope name="typescript.function-type">
                <starts-with>
                    <expression>(?=\()</expression>
                </starts-with>
                <ends-with />
                <subscopes anchored="true">
                    <include syntax="self" collection="arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.function-type.return-type">
                        <starts-with>
                            <expression>=&gt;</expression>
                            <capture number="0" name="typescript.operator" />
                        </starts-with>
                        <ends-with>
                            <expression>(?=\{|\;)|$</expression>
                        </ends-with>
                        <subscopes anchored="true" skip-whitespace="lazy">
                            <include syntax="self" collection="comments" optional="true" repeat="true" />
                            <include syntax="self" collection="types" repeat="true" />
                        </subscopes>
                    </scope>
                </subscopes>
            </scope>
            <scope name="typescript.type-container">
                <starts-with>
                    <expression>([a-zA-Z_][A-Za-z0-9_]*)(&lt;)</expression>
                    <capture number="1" name="typescript.identifier.type.name" />
                    <capture number="2" name="typescript.bracket" />
                </starts-with>
                <ends-with>
                    <expression>(&gt;)(\[\])?</expression>
                    <capture number="1" name="typescript.bracket" />
                    <capture number="2" name="typescript.operator.array" />
                </ends-with>
                <subscopes>
                    <cut-off>
                        <expression>(?=\b(?:function|class|if|else|while|for)\b)</expression>
                    </cut-off>
                    <include syntax="self" collection="types" />
                </subscopes>
            </scope>
            <scope name="typescript.identifier.type">
                <expression>([a-zA-Z_][A-Za-z0-9_]*)(\[\])?</expression>
                <capture number="2" name="typescript.operator.array" />
            </scope>
            
            <include syntax="self" collection="values" />
        </collection>
        
        <!-- !Keywords -->
        <collection name="keywords">
            <scope name="typescript.keyword.construct">
                <strings>
                    <string>class</string>
                    <string>const</string>
                    <string>constructor</string>
                    <string>enum</string>
                    <string>function</string>
                    <string>interface</string>
                    <string>label</string>
                    <string>let</string>
                    <string>module</string>
                    <string>new</string>
                    <string>package</string>
                    <string>type</string>
                    <string>var</string>
                    <string>void</string>
                </strings>
            </scope>
            <scope name="typescript.keyword.modifier">
                <strings>
                    <string>abstract</string>
                    <string>as</string>
                    <string>async</string>
                    <string>declare</string>
                    <string>export</string>
                    <string>extends</string>
                    <string>from</string>
                    <string>implements</string>
                    <string>in</string>
                    <string>instanceof</string>
                    <string>of</string>
                    <string>private</string>
                    <string>protected</string>
                    <string>public</string>
                    <string>static</string>
                    <string>typeof</string>
                </strings>
            </scope>
            <scope name="typescript.keyword.condition">
                <strings>
                    <string>case</string>
                    <string>catch</string>
                    <string>default</string>
                    <string>do</string>
                    <string>else</string>
                    <string>finally</string>
                    <string>for</string>
                    <string>if</string>
                    <string>switch</string>
                    <string>try</string>
                    <string>while</string>
                    <string>with</string>
                </strings>
            </scope>
            <scope name="typescript.keyword.statement">
                <strings>
                    <string>await</string>
                    <string>break</string>
                    <string>continue</string>
                    <string>debugger</string>
                    <string>delete</string>
                    <string>import</string>
                    <string>return</string>
                    <string>throw</string>
                    <string>yield</string>
                </strings>
            </scope>
            <scope name="typescript.keyword.self">
                <strings>
                    <string>this</string>
                    <string>super</string>
                </strings>
            </scope>
        </collection>
        
        <!-- !Expressions -->
        <collection name="expressions">
            <include syntax="self" collection="comments" />
            <include syntax="self" collection="keywords" />
            <include syntax="self" collection="values" />
            <include syntax="self" collection="identifiers" />
            <include syntax="self" collection="blocks" />
            <scope name="typescript.group">
                <starts-with>
                    <expression>\(</expression>
                    <capture number="0" name="typescript.bracket" />
                </starts-with>
                <ends-with>
                    <expression>\)</expression>
                    <capture number="0" name="typescript.bracket" />
                </ends-with>
                <subscopes>
                    <include syntax="self" collection="expressions" />
                </subscopes>
            </scope>
            <include syntax="self" collection="syntax" />
        </collection>
        
        <!-- !Key Expressions -->
        <collection name="key-expressions">
            <include syntax="self" collection="comments" />
            
            <!-- !Computed Keys -->
            <scope name="typescript.key-expression.computed">
                <symbol type="property">
                    <context behavior="subtree" />
                </symbol>
                <starts-with>
                    <expression>(\[)(?=[^\]\{]+\]:)</expression>
                    <capture number="1" name="typescript.bracket" />
                </starts-with>
                <ends-with>
                    <expression>(?=,|\})</expression>
                </ends-with>
                <subscopes anchored="true">
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.key-expression.computed.expression.name">
                        <starts-with>
                            <expression>(?=[^\]])</expression>
                        </starts-with>
                        <ends-with>
                            <expression>(?=\])</expression>
                        </ends-with>
                        <subscopes anchored="true">
                            <include syntax="self" collection="expressions" repeat="true" />
                        </subscopes>
                    </scope>
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <scope name="typescript.bracket">
                        <expression>\]</expression>
                    </scope>
                    <scope name="typescript.colon">
                        <expression>:</expression>
                    </scope>
                    <include syntax="self" collection="expressions" repeat="true" />
                </subscopes>
            </scope>
            
            <!-- !Unquoted Keys -->
            <scope name="typescript.key-expression.function">
                <symbol type="method" />
                <starts-with>
                    <expression>((?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)\s*(:)(?=\s*function\b)</expression>
                    <capture number="1" name="typescript.identifier.key.name" />
                    <capture number="2" name="typescript.colon" />
                </starts-with>
                <ends-with>
                    <expression>(?=\}|,)</expression>
                </ends-with>
                <subscopes anchored="true">
                    <scope name="typescript.key-expression.function">
                        <expression>\b(function)(?:(\*)?|\b)</expression>
                        <capture number="1" name="typescript.function.keyword.construct" />
                        <capture number="2" name="typescript.operator" />
                    </scope>
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="function-blocks" />
                </subscopes>
            </scope>
            <scope name="typescript.key-expression">
                <symbol type="property">
                    <context behavior="subtree" />
                </symbol>
                <starts-with>
                    <expression>((?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)\s*(:)</expression>
                    <capture number="1" name="typescript.identifier.key.name" />
                    <capture number="2" name="typescript.colon" />
                </starts-with>
                <ends-with>
                    <expression>(?=\}|,)</expression>
                </ends-with>
                <subscopes anchored="true">
                    <include syntax="self" collection="expressions" />
                </subscopes>
            </scope>
            
            <!-- !Quoted Keys -->
            <scope name="typescript.key-expression.function.quoted">
                <symbol type="method" />
                <starts-with>
                    <expression>((&quot;|&apos;)((?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)(\2))\s*(:)(?=\s*function\b)</expression>
                    <capture number="1" name="typescript.key.string" />
                    <capture number="2" name="typescript.key.string.delimiter" />
                    <capture number="3" name="typescript.identifier.key.name" />
                    <capture number="4" name="typescript.key.string.delimiter" />
                    <capture number="5" name="typescript.colon" />
                </starts-with>
                <ends-with>
                    <expression>(?=\}|,)</expression>
                </ends-with>
                <subscopes anchored="true">
                    <scope name="typescript.key-expression.function">
                        <expression>\b(function)(?:(\*)?|\b)</expression>
                        <capture number="1" name="typescript.function.keyword.construct" />
                        <capture number="2" name="typescript.operator" />
                    </scope>
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="arguments" />
                    <include syntax="self" collection="comments" optional="true" repeat="true" />
                    <include syntax="self" collection="function-blocks" />
                </subscopes>
            </scope>
            <scope name="typescript.key-expression.quoted">
                <symbol type="property">
                    <context behavior="subtree" />
                </symbol>
                <starts-with>
                    <expression>((&quot;|&apos;)((?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)(\2))\s*(:)</expression>
                    <capture number="1" name="typescript.key.string" />
                    <capture number="2" name="typescript.key.string.delimiter" />
                    <capture number="3" name="typescript.identifier.key.name" />
                    <capture number="4" name="typescript.key.string.delimiter" />
                    <capture number="5" name="typescript.colon" />
                </starts-with>
                <ends-with>
                    <expression>(?=\}|,)</expression>
                </ends-with>
                <subscopes anchored="true">
                    <include syntax="self" collection="expressions" repeat="true" />
                </subscopes>
            </scope>
            
            <include syntax="self" collection="methods" />
            
            <scope name="typescript.comma">
                <expression>,</expression>
            </scope>
        </collection>
        
        <!-- !Values -->
        <collection name="values">
            <include syntax="self" collection="strings" />
            <include syntax="self" collection="functions" />
            
            <scope name="typescript.object-literal">
                <symbol type="block">
                    <context behavior="subtree" />
                </symbol>
                <starts-with>
                    <expression>
                        (?&lt;=[=\-+:,\(\[])\s*(\{)
                        | (\{)(?=\s*[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]+\s*:|\})
                    </expression>
                    <capture number="1" name="typescript.block.bracket" />
                    <capture number="2" name="typescript.block.bracket" />
                </starts-with>
                <ends-with>
                    <expression>\}</expression>
                    <capture number="0" name="typescript.block.bracket" />
                </ends-with>
                <subscopes>
                    <include syntax="self" collection="key-expressions" />
                    <include syntax="self" />
                </subscopes>
            </scope>
            
            <scope name="typescript.value.null">
                <strings>
                    <string>null</string>
                    <string>undefined</string>
                    <string>NaN</string>
                    <string>Infinity</string>
                </strings>
            </scope>
            
            <scope name="typescript.value.boolean">
                <strings>
                    <string>true</string>
                    <string>false</string>
                </strings>
            </scope>
            
            <scope name="typescript.value.number.binary">
                <expression>\b(0[bB])([01]+)\b</expression>
                <capture number="1" name="typescript.value.number.binary.prefix" />
            </scope>
            <scope name="typescript.value.number.octal">
                <expression>\b(0[oO])([0-7]+)\b</expression>
                <capture number="1" name="typescript.value.number.octal.prefix" />
            </scope>
            <scope name="typescript.value.number.hexadecimal">
                <expression>\b(0[xX])([a-fA-F0-9]+)\b</expression>
                <capture number="1" name="typescript.value.number.hexadecimal.prefix" />
            </scope>
            <scope name="typescript.value.number.decimal">
                <expression>
                    (-)? # sign
                    (
                        \b\d+(\.\d*)? # 0, 0., 0.0
                        | \.\d+ # .0
                    )
                    ((e|E)(\+|-)?\d+)? # exponent
                    \b
                </expression>
                <capture number="1" name="typescript.operator" />
            </scope>
            
            <scope name="typescript.collection.array">
                <starts-with>
                    <expression>\[</expression>
                    <capture number="0" name="typescript.bracket" />
                </starts-with>
                <ends-with>
                    <expression>\]</expression>
                    <capture number="0" name="typescript.bracket" />
                </ends-with>
                <subscopes>
                    <include syntax="self" collection="expressions" />
                </subscopes>
            </scope>
        </collection>
        
        <!-- !Strings -->
        <collection name="strings">
            <scope name="typescript.string.backtick-quoted">
                <starts-with>
                    <expression>`</expression>
                    <capture number="0" name="typescript.string.backtick-quoted.delimiter" />
                </starts-with>
                <ends-with>
                    <expression>`</expression>
                    <capture number="0" name="typescript.string.backtick-quoted.delimiter" />
                </ends-with>
                <subscopes>
                    <scope name="typescript.string.backtick-quoted.escape">
                        <expression>\\.</expression>
                    </scope>
                    <scope name="typescript.string-template-block" reset-styles="true">
                        <starts-with>
                            <expression>\$\{</expression>
                            <capture number="0" name="typescript.string-template.open" />
                        </starts-with>
                        <ends-with>
                            <expression>\}</expression>
                            <capture number="0" name="typescript.string-template.close" />
                        </ends-with>
                        <subscopes>
                            <include syntax="self" collection="string-literal-inline-expressions" />
                        </subscopes>
                    </scope>
                </subscopes>
            </scope>
            <scope name="typescript.string.double-quoted">
                <starts-with>
                    <expression>&quot;</expression>
                    <capture number="0" name="typescript.string.double-quoted.delimiter" />
                </starts-with>
                <ends-with>
                    <expression>&quot;|(?:(?&lt;!\\)$)</expression>
                    <capture number="0" name="typescript.string.double-quoted.delimiter" />
                </ends-with>
                <subscopes>
                    <scope name="typescript.string.double-quoted.escape">
                        <expression>\\.</expression>
                    </scope>
                </subscopes>
            </scope>
            <scope name="typescript.string.single-quoted">
                <starts-with>
                    <expression>&apos;</expression>
                    <capture number="0" name="typescript.string.single-quoted.delimiter" />
                </starts-with>
                <ends-with>
                    <expression>&apos;|(?:(?&lt;!\\)$)</expression>
                    <capture number="0" name="typescript.string.single-quoted.delimiter" />
                </ends-with>
                <subscopes>
                    <scope name="typescript.string.single-quoted.escape">
                        <expression>\\.</expression>
                    </scope>
                </subscopes>
            </scope>
            <scope name="typescript.string.regex">
                <starts-with>
                    <expression>(?&lt;=[\[=(?:+,!]|^|return|:|=&gt;|&amp;&amp;|\|\|)\s*(/)(?=[^/*+?].*/)</expression>
                    <capture number="1" name="typescript.string.regex.delimiter" />
                </starts-with>
                <ends-with>
                    <expression>(/)([cgimosuxy]+\b)?</expression>
                    <capture number="1" name="typescript.string.regex.delimiter" />
                </ends-with>
                <subscopes>
                    <scope name="typescript.string.regex.escape">
                        <expression>\\.</expression>
                    </scope>
                    <scope name="typescript.string.regex.character-class">
                        <starts-with>
                            <expression>\[</expression>
                        </starts-with>
                        <ends-with>
                            <expression>\]</expression>
                        </ends-with>
                        <subscopes>
                            <scope name="typescript.string.regex.escape">
                                <expression>\\.</expression>
                            </scope>
                            <cut-off>
                                <expression>(?=/)</expression>
                            </cut-off>
                        </subscopes>
                    </scope>
                </subscopes>
            </scope>
        </collection>
        
        <!-- !Expressions for String Literals -->
        <collection name="string-literal-inline-expressions">
            <scope name="typescript.string-literal.inline-expression">
                <starts-with>
                    <expression>(?=[^;|{])</expression>
                </starts-with>
                <ends-with>
                    <expression>(?=\})</expression>
                </ends-with>
                <subscopes>
                    <include syntax="self" collection="expressions" />
                </subscopes>
            </scope>
        </collection>
        
        <!-- !Identifiers -->
        <collection name="identifiers">
            <scope name="typescript.identifier.core.global">
                <strings prefix="(?&lt;!\.)">
                    <string>arguments</string>
                    <string>crypto</string>
                    <string>document</string>
                    <string>localStorage</string>
                    <string>sessionStorage</string>
                    <string>window</string>
                    <string>Object</string>
                    <string>Symbol</string>
                    <string>Boolean</string>
                    <string>Date</string>
                    <string>Function</string>
                    <string>Math</string>
                    <string>Number</string>
                    <string>String</string>
                    <string>RegExp</string>
                    <string>Array</string>
                    <string>Int8Array</string>
                    <string>Uint8Array</string>
                    <string>Uint8ClampedArray</string>
                    <string>Int16Array</string>
                    <string>Uint16Array</string>
                    <string>Int32Array</string>
                    <string>Uint32Array</string>
                    <string>Float32Array</string>
                    <string>Float64Array</string>
                    <string>Map</string>
                    <string>Set</string>
                    <string>WeakMap</string>
                    <string>WeakSet</string>
                    <string>ArrayBuffer</string>
                    <string>DataView</string>
                    <string>JSON</string>
                    <string>Promise</string>
                    <string>Generator</string>
                    <string>GeneratorFunction</string>
                    <string>Reflect</string>
                    <string>Proxy</string>
                    <string>Intl</string>
                    <string>Error</string>
                    <string>EvalError</string>
                    <string>InternalError</string>
                    <string>RangeError</string>
                    <string>ReferenceError</string>
                    <string>SyntaxError</string>
                    <string>TypeError</string>
                    <string>URIError</string>
                </strings>
            </scope>
            <scope name="typescript.identifier.core.function">
                <strings prefix="(?&lt;!\.)" suffix="(?=\()">
                    <string>decodeURLComponent</string>
                    <string>decodeURI</string>
                    <string>encodeURIComponent</string>
                    <string>encodeURI</string>
                    <string>escape</string>
                    <string>eval</string>
                    <string>isFinite</string>
                    <string>isNaN</string>
                    <string>parseFloat</string>
                    <string>parseInt</string>
                    <string>unescape</string>
                </strings>
            </scope>
            <scope name="typescript.identifier.property">
                <expression>(?&lt;=\.)((?:\#?)[a-zA-Z_\$][A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)\b(?!\()</expression>
            </scope>
            <scope name="typescript.identifier.method">
                <expression>(?&lt;=\.)([a-zA-Z_\$][A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)(?=\()</expression>
            </scope>
            <scope name="typescript.identifier.function">
                <expression>(?&lt;!\.)((?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*)(?=\()</expression>
            </scope>
            <scope name="typescript.identifier.constant">
                <expression>(?&lt;![a-z0-9_])(?:\b[A-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*</expression>
            </scope>
            <scope name="typescript.identifier">
                <expression>(?:\b[a-zA-Z_]|\$)[A-Za-zÀ-ÖØ-öø-ÿŸřŘšŠžŽ0-9_]*</expression>
            </scope>
        </collection>
        
        <!-- !Syntax -->
        <collection name="syntax">
            <scope name="typescript.operator">
                <expression>(\+|\-|\*|/|%|\+\+|\-\-|\=|\=\=|!\=|\+\=|\-\=|\*\=|/\=|%\=|\&lt;|\&gt;|\&lt;\=|\&gt;=|\=\=\=|!\=\=|&amp;&amp;|\||\|\||!|\^|&amp;|\&lt;\&lt;|\&gt;\&gt;|~)</expression>
            </scope>
            <scope name="typescript.operator.spread">
                <expression>\.\.\.</expression>
            </scope>
            <scope name="typescript.dot">
                <expression>\.</expression>
            </scope>
            <scope name="typescript.bracket">
                <expression>[\(\[\)\]]</expression>
            </scope>
            <scope name="typescript.comma">
                <expression>,</expression>
            </scope>
            <scope name="typescript.semicolon">
                <expression>;</expression>
            </scope>
        </collection>
    </collections>
</syntax>
